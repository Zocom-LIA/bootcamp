service: aws
frameworkVersion: '3'
useDotenv: true

provider:
  stage: dev
  name: aws
  runtime: nodejs18.x
  httpApi:
    name: YYGS
  iam:
    role: arn:aws:iam::119763079540:role/test
  region:
    eu-north-1
  environment:
    DYNAMODB_USER_TABLE: ${self-service}-YYGS_Users-${sls:stage}
    DYNAMODB_USER_TABLE: ${self-service}-YYGS_Menu-${sls:stage}
    DYNAMODB_USER_TABLE: ${self-service}-YYGS_Orders-${sls:stage}

functions:
  - ${file(./functions.yml)}

resources:
  Resources:
    users:
      Type: AWS::DynamoDB::Table
      Properties:
        TableName: YYGS_Users
        AttributeDefinitions:
          - AttributeName: id
            AttributeType: S
        BillingMode: PAY_PER_REQUEST
        KeySchema:
          - AttributeName: id
            KeyType: HASH
    menu:
      Type: AWS::DynamoDB::Table
      Properties:
        TableName: YYGS_Menu
        AttributeDefinitions:
          - AttributeName: name
            AttributeType: S
        BillingMode: PAY_PER_REQUEST
        KeySchema:
          - AttributeName: name
            KeyType: HASH
    orders:
      Type: AWS::DynamoDB::Table
      Properties:
        TableName: YYGS_Orders
        AttributeDefinitions:
          - AttributeName: id
            AttributeType: S
        BillingMode: PAY_PER_REQUEST
        KeySchema:
          - AttributeName: id
            KeyType: HASH